<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Wordle Thématique</title>
<style>
  body { font-family: sans-serif; text-align:center; padding:20px; background:#f5f5f5; }
  .grid { display: grid; grid-template-columns: repeat(10, 50px); gap:5px; justify-content:center; margin-bottom:20px;}
  .cell { width:50px; height:50px; border:2px solid #ccc; display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:18px; text-transform:uppercase; }
  .green { background:#6aaa64; color:white; }
  .yellow { background:#c9b458; color:white; }
  .gray { background:#787c7e; color:white; }
  .redline { background:#ff4d4d !important; color:white !important; }
  input { padding:5px; font-size:18px; width:150px; text-transform:uppercase; }
  button { padding:5px 10px; margin-left:5px; }
  #shareMessage { margin-top:20px; }
</style>
</head>
<body>

<h1>Wordle Thématique</h1>
<h2 id="theme"></h2>
<div class="grid" id="grid"></div>
<input type="text" id="guessInput" placeholder="Entrez un mot">
<button id="submitBtn">Enter</button>
<button id="shareBtn">Partager</button>
<div id="shareMessage"></div>

<script src="themes.js"></script>
<script>
const gridEl = document.getElementById("grid");
const inputEl = document.getElementById("guessInput");
const submitBtn = document.getElementById("submitBtn");
const shareBtn = document.getElementById("shareBtn");
const themeEl = document.getElementById("theme");
const shareMessage = document.getElementById("shareMessage");

let currentRow = 0;
const maxRows = 6;

// Choisir un mot du jour
const todayIndex = new Date().getDate() % WORDS.length;
const todayWord = WORDS[todayIndex].word.toUpperCase();
const todayTheme = WORDS[todayIndex].theme;
const wordLength = todayWord.length;

themeEl.textContent = `Thème: ${todayTheme}`;

// Créer la grille
const cells = [];
for(let r=0;r<maxRows;r++){
  for(let c=0;c<wordLength;c++){
    const cell = document.createElement("div");
    cell.classList.add("cell");
    gridEl.appendChild(cell);
    cells.push(cell);
  }
}

submitBtn.addEventListener("click", submitGuess);
inputEl.addEventListener("keypress", e => { if(e.key==='Enter') submitGuess(); });

function submitGuess(){
  const guess = inputEl.value.toUpperCase();

  // Vérifier longueur et existence du mot
  if(guess.length !== wordLength || !WORDS.some(w => w.word.toUpperCase() === guess)){
    markRedLine();
    inputEl.value = "";
    return;
  }

  // Remplir la ligne avec couleurs
  for(let i=0;i<wordLength;i++){
    const cell = cells[currentRow*wordLength+i];
    cell.textContent = guess[i];
    if(guess[i] === todayWord[i]) cell.classList.add("green");
    else if(todayWord.includes(guess[i])) cell.classList.add("yellow");
    else cell.classList.add("gray");
  }

  if(guess === todayWord){
    alert("Bravo ! Tu as trouvé le mot !");
    inputEl.disabled = true;
  } else if(currentRow+1 === maxRows){
    alert(`Perdu ! Le mot était : ${todayWord}`);
    inputEl.disabled = true;
  }

  currentRow++;
  inputEl.value = "";
}

function markRedLine(){
  for(let i=0;i<wordLength;i++){
    const cell = cells[currentRow*wordLength+i];
    cell.classList.add("redline");
  }
}

// Partage simple sans spoiler
shareBtn.addEventListener("click",()=>{
  const text = `Wordle Thématique - Thème: ${todayTheme} - Essai: ${currentRow} / ${maxRows}`;
  navigator.clipboard.writeText(text);
  shareMessage.textContent = "Texte copié dans le presse-papier !";
});
</script>
</body>
</html>
